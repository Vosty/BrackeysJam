[gd_scene load_steps=87 format=3 uid="uid://b84a3o0vgjdmf"]

[ext_resource type="Script" path="res://scripts/shop.gd" id="1_uvbbd"]
[ext_resource type="Resource" uid="uid://brgxok2paxgw" path="res://Upgrades/Coin.tres" id="2_jmf0d"]
[ext_resource type="Resource" uid="uid://h68udoihxw1p" path="res://Upgrades/Iron_Key.tres" id="3_jqn3n"]
[ext_resource type="Resource" uid="uid://bai7a6b7y6u3y" path="res://Upgrades/Rusty_Key.tres" id="4_d4ie2"]
[ext_resource type="PackedScene" uid="uid://dno7xid3tv17d" path="res://scenes/dashboard.tscn" id="5_5d8yj"]
[ext_resource type="Resource" uid="uid://b4o5ix58fqp27" path="res://Upgrades/Snake_Fang.tres" id="5_uqm5g"]
[ext_resource type="Resource" uid="uid://dnex2aapd7nvv" path="res://Upgrades/Key_Ring.tres" id="6_r6voh"]
[ext_resource type="Resource" uid="uid://c3jeyhghx0sgy" path="res://Upgrades/Milk.tres" id="7_1v8cs"]
[ext_resource type="Resource" uid="uid://bx1svtnhbmqig" path="res://Upgrades/Monster_Hand.tres" id="8_743kg"]
[ext_resource type="Resource" uid="uid://b61mdgtbr4v8k" path="res://Upgrades/cuff_links.tres" id="9_y723m"]
[ext_resource type="Texture2D" uid="uid://cdvw4awemuqv7" path="res://assets/eye.png" id="9_yh4x6"]
[ext_resource type="Texture2D" uid="uid://cxc681ot3g7cb" path="res://assets/Upgrades/Clover.png" id="10_u75pn"]
[ext_resource type="Resource" uid="uid://c2oo23xd3x785" path="res://Upgrades/Shades.tres" id="10_vuf7m"]
[ext_resource type="AudioStream" uid="uid://dw48nv7kmhros" path="res://assets/Audio/SFX/buy.wav" id="11_pkvse"]
[ext_resource type="Texture2D" uid="uid://cy1q6vpn5y3bh" path="res://assets/pixel_bell.png" id="12_cq3om"]
[ext_resource type="AudioStream" uid="uid://xcjbiy3rno7y" path="res://assets/Audio/SFX/reroll.wav" id="12_hta76"]
[ext_resource type="AudioStream" uid="uid://dl32r63ajcntb" path="res://assets/Audio/SFX/out_of_money.wav" id="13_1jol7"]
[ext_resource type="Texture2D" uid="uid://0es4imerv43x" path="res://assets/pixel_bell_depressed.png" id="13_brnwm"]
[ext_resource type="AudioStream" uid="uid://e7gwtkqv5282" path="res://assets/Audio/SFX/free_reroll.wav" id="13_cw61c"]
[ext_resource type="AudioStream" uid="uid://c2p7eud0nrgha" path="res://assets/Audio/SFX/open_door.wav" id="15_24dd0"]
[ext_resource type="Texture2D" uid="uid://cy0nh5mee3exe" path="res://assets/Backgrounds/Alt_Shop.png" id="17_u1mcc"]
[ext_resource type="Texture2D" uid="uid://bb2ryc7kx1w2" path="res://assets/Backgrounds/couch.png" id="18_oh6et"]
[ext_resource type="Texture2D" uid="uid://6rfqo8cow2hl" path="res://assets/Backgrounds/chair.png" id="19_5qa0a"]
[ext_resource type="Texture2D" uid="uid://jq5jm7r62q04" path="res://assets/UI/Door_Closed.png" id="19_jhu5i"]
[ext_resource type="Shader" path="res://assets/Shaders/Outline.gdshader" id="19_tsiju"]
[ext_resource type="Texture2D" uid="uid://c82i85vjohw2l" path="res://assets/Backgrounds/vase.png" id="20_5a6xa"]
[ext_resource type="FontFile" uid="uid://cdm2t6777veyl" path="res://assets/Fonts/Pixelify_Sans/PixelifySans-VariableFont_wght.ttf" id="20_7ggis"]
[ext_resource type="Texture2D" uid="uid://ctame1f6cywnp" path="res://assets/UI/Door_Open.png" id="20_tc5ql"]
[ext_resource type="StyleBox" uid="uid://b1iiw8qxkhdl6" path="res://assets/UI/style_box4_normal.tres" id="21_tsjoh"]
[ext_resource type="StyleBox" uid="uid://cn7ajviktyvby" path="res://assets/UI/style_box4_hover.tres" id="22_6kxwt"]
[ext_resource type="StyleBox" uid="uid://d0rhbxput1ae4" path="res://assets/UI/style_box4_pressed.tres" id="23_ncpfo"]
[ext_resource type="Texture2D" uid="uid://ck7g82gjykn2f" path="res://assets/UI/Door_partial_open.png" id="26_svq6n"]
[ext_resource type="Script" path="res://scripts/TalkShop.gd" id="27_k17hy"]
[ext_resource type="Resource" uid="uid://c3w4w2c13vxwq" path="res://Dialogues/Annoying.tres" id="34_uqav8"]
[ext_resource type="Resource" uid="uid://cxrbtd62b33ua" path="res://Dialogues/barrels_brother.tres" id="35_7mb3j"]
[ext_resource type="Resource" uid="uid://bg6skifo0qow0" path="res://Dialogues/Skrob_milk_dialogue.tres" id="37_qolwr"]
[ext_resource type="StyleBox" uid="uid://b06t1e75daqwc" path="res://assets/UI/Dialogue1.tres" id="38_n8mt3"]
[ext_resource type="Resource" uid="uid://xuv6jc8i4riy" path="res://Dialogues/chicken_snake.tres" id="38_o6vor"]
[ext_resource type="Resource" uid="uid://cec3jfa1n4ifr" path="res://Dialogues/chicken_joke.tres" id="39_ru1y1"]
[ext_resource type="StyleBox" uid="uid://ciob6qsv81cfn" path="res://assets/UI/Dialogue2.tres" id="39_wirer"]
[ext_resource type="Resource" uid="uid://b7mu7vp8wu7m6" path="res://Dialogues/game_logic.tres" id="40_iltgu"]
[ext_resource type="Resource" uid="uid://7a1wcl2b4sc5" path="res://Dialogues/pizzaman_and_stranger_drip.tres" id="41_fcdxu"]
[ext_resource type="Resource" uid="uid://xkswhwoyogad" path="res://Dialogues/flip_dialogue.tres" id="41_mftnc"]
[ext_resource type="Resource" uid="uid://wfo13ub2hwnv" path="res://Dialogues/pizza_man_rizz.tres" id="42_p4mbs"]
[ext_resource type="Resource" uid="uid://cv8yhl50nx8hm" path="res://Dialogues/generic_dialogue2.tres" id="43_ns2ou"]
[ext_resource type="Resource" uid="uid://dvhgsaubepuew" path="res://Dialogues/pizza_shades_dialogue.tres" id="43_v25h8"]
[ext_resource type="Resource" uid="uid://k2nasj3hrixc" path="res://Dialogues/bathroom.tres" id="43_w5icr"]
[ext_resource type="Resource" uid="uid://bvvrytf6s024x" path="res://Dialogues/generic_dialogue3.tres" id="44_2e4ew"]
[ext_resource type="Resource" uid="uid://i2ipl5hr7ktd" path="res://Dialogues/stranger_danger.tres" id="44_bt4vy"]
[ext_resource type="Resource" uid="uid://dxx388vskttrv" path="res://Dialogues/generic_dialogue4.tres" id="45_r1rqu"]
[ext_resource type="Resource" uid="uid://diq2ss5anxbdg" path="res://Dialogues/fine_mama.tres" id="45_u3ovb"]
[ext_resource type="Resource" uid="uid://siqhixknmd58" path="res://Dialogues/generic_dialogue5.tres" id="46_dy5ik"]
[ext_resource type="Resource" uid="uid://bllt4w1346pvd" path="res://Dialogues/fitness_center.tres" id="46_hrbqq"]
[ext_resource type="Resource" uid="uid://c2knlxp8rlcg1" path="res://Dialogues/generic_dialogue6.tres" id="47_mpoo3"]
[ext_resource type="Resource" uid="uid://b48gdova5llqm" path="res://Dialogues/generic_dialogue7.tres" id="48_nkfhb"]
[ext_resource type="Resource" uid="uid://b8hqnhbnhll7g" path="res://Dialogues/greebo_single.tres" id="48_yblgj"]
[ext_resource type="Resource" uid="uid://term1e6juc1f" path="res://Dialogues/generic_dialogue8.tres" id="49_qqo7h"]
[ext_resource type="Resource" uid="uid://cevd0rg5pqkks" path="res://Dialogues/not_human.tres" id="49_u43m2"]
[ext_resource type="Resource" uid="uid://bol0qanjws8il" path="res://Dialogues/generic_dialogue9.tres" id="50_epysp"]
[ext_resource type="Resource" uid="uid://0lcr5nyt1khx" path="res://Dialogues/generic_dialogue10.tres" id="51_jckm4"]
[ext_resource type="Resource" uid="uid://b108o0vd0ds5x" path="res://Dialogues/generic_dialogue11.tres" id="52_ecqcm"]
[ext_resource type="Resource" uid="uid://b7omfdaiakd47" path="res://Dialogues/generic_dialogue12.tres" id="53_0y2jg"]
[ext_resource type="Resource" uid="uid://b4rhoojkds0p7" path="res://Dialogues/pool_incident.tres" id="53_af0mv"]
[ext_resource type="Resource" uid="uid://bpr0cloqun4x" path="res://Dialogues/generic_dialogue13.tres" id="54_ux066"]
[ext_resource type="Resource" uid="uid://cgasygf0cccm1" path="res://Dialogues/generic_dialogue14.tres" id="55_71xnl"]
[ext_resource type="Resource" uid="uid://bgjgy7bx4h0sw" path="res://Dialogues/skrob_request.tres" id="55_ocmmk"]
[ext_resource type="Resource" uid="uid://if0jeqsfbp3p" path="res://Dialogues/generic_dialogue15.tres" id="56_a8chn"]
[ext_resource type="Resource" uid="uid://dov10rh12g2bv" path="res://Dialogues/generic_dialogue16.tres" id="57_6cavy"]
[ext_resource type="Resource" uid="uid://yergg5stykmj" path="res://Dialogues/tension.tres" id="57_ovvnp"]
[ext_resource type="Resource" uid="uid://c0phk5s5pp624" path="res://Dialogues/tentacle_care.tres" id="58_njdw2"]
[ext_resource type="Resource" uid="uid://bgbwsb8jn3nqw" path="res://Dialogues/generic_dialogue17.tres" id="58_s26ah"]
[ext_resource type="Resource" uid="uid://bblic2tx2k21u" path="res://Dialogues/generic_dialogue18.tres" id="59_ev35b"]
[ext_resource type="Resource" uid="uid://cdvpedtw2gtx6" path="res://Dialogues/generic_dialogue19.tres" id="60_56034"]
[ext_resource type="Resource" uid="uid://cwr6hxvaj3ar8" path="res://Dialogues/generic_dialogue20.tres" id="61_7ou4q"]
[ext_resource type="Resource" uid="uid://dvl70swru7fpm" path="res://Dialogues/generic_dialogue.tres" id="62_c81xl"]
[ext_resource type="Resource" uid="uid://du742tixlsdcy" path="res://Dialogues/gloper_hand.tres" id="63_jyji2"]
[ext_resource type="Resource" uid="uid://bk7n06a5e1uyr" path="res://Dialogues/greebo_estate.tres" id="64_ysuoo"]
[ext_resource type="Resource" uid="uid://bs2plm6xalr6j" path="res://Dialogues/Hats.tres" id="66_puo1b"]
[ext_resource type="Resource" uid="uid://bs8ruaps2hlif" path="res://Dialogues/loud_calls.tres" id="67_x1c77"]
[ext_resource type="Resource" uid="uid://c2s63pkw2bx53" path="res://Dialogues/Morrimancer_lore.tres" id="68_x867q"]
[ext_resource type="Resource" uid="uid://brg8a5xfmf43n" path="res://Dialogues/need_a_hand.tres" id="69_563il"]
[ext_resource type="Resource" uid="uid://bbfx0dqxan3td" path="res://Dialogues/roomservice.tres" id="75_ppkv7"]
[ext_resource type="Resource" uid="uid://de5swnstccn0w" path="res://Dialogues/suit_sprite.tres" id="79_a5hii"]
[ext_resource type="Resource" uid="uid://b266nli8ouj3q" path="res://Dialogues/suit_sprite_2.tres" id="80_2t88m"]
[ext_resource type="Resource" uid="uid://bw3wpacx82uoi" path="res://Dialogues/vending_machine.tres" id="83_0bb7y"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_1kh6i"]
shader = ExtResource("19_tsiju")
shader_parameter/width = null
shader_parameter/outline_color = null
shader_parameter/fade = 1.0

[node name="Shop" type="Node"]
script = ExtResource("1_uvbbd")
available_upgrades = [ExtResource("3_jqn3n"), ExtResource("4_d4ie2"), ExtResource("2_jmf0d"), ExtResource("5_uqm5g"), ExtResource("6_r6voh"), ExtResource("7_1v8cs"), ExtResource("8_743kg"), ExtResource("9_y723m"), ExtResource("10_vuf7m")]
labels = [NodePath("CanvasLayer/GridContainer/Label"), NodePath("CanvasLayer/GridContainer/Label 1"), NodePath("CanvasLayer/GridContainer/Label 2")]
texs = [NodePath("CanvasLayer/GridContainer/Item"), NodePath("CanvasLayer/GridContainer/Item 1"), NodePath("CanvasLayer/GridContainer/Item 2")]
buttons = [NodePath("CanvasLayer/GridContainer/Button 1"), NodePath("CanvasLayer/GridContainer/Button 2"), NodePath("CanvasLayer/GridContainer/Button 3")]
buy_sound = ExtResource("11_pkvse")
reroll_sound = ExtResource("12_hta76")
free_reroll_sound = ExtResource("13_cw61c")
broke_sound = ExtResource("13_1jol7")
leave_sound = ExtResource("15_24dd0")

[node name="Dashboard" parent="." instance=ExtResource("5_5d8yj")]

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -3

[node name="Background" type="TextureRect" parent="CanvasLayer"]
offset_right = 1080.0
offset_bottom = 720.0
texture = ExtResource("17_u1mcc")

[node name="Couch" type="TextureRect" parent="CanvasLayer"]
offset_left = 827.0
offset_top = 594.0
offset_right = 1001.0
offset_bottom = 710.0
texture = ExtResource("18_oh6et")

[node name="Chair" type="TextureRect" parent="CanvasLayer"]
offset_left = 874.0
offset_top = 177.0
offset_right = 994.0
offset_bottom = 369.0
texture = ExtResource("19_5qa0a")

[node name="vase" type="TextureRect" parent="CanvasLayer"]
offset_left = 1014.0
offset_top = 575.0
offset_right = 1078.0
offset_bottom = 639.0
texture = ExtResource("20_5a6xa")

[node name="GridContainer" type="GridContainer" parent="CanvasLayer"]
offset_left = 474.0
offset_top = 286.0
offset_right = 803.0
offset_bottom = 454.0
theme_override_constants/h_separation = 70
theme_override_constants/v_separation = 16
columns = 3

[node name="Item" type="TextureRect" parent="CanvasLayer/GridContainer"]
layout_mode = 2
texture = ExtResource("9_yh4x6")
stretch_mode = 5

[node name="Item 1" type="TextureRect" parent="CanvasLayer/GridContainer"]
layout_mode = 2
texture = ExtResource("9_yh4x6")
stretch_mode = 5

[node name="Item 2" type="TextureRect" parent="CanvasLayer/GridContainer"]
layout_mode = 2
texture = ExtResource("10_u75pn")
stretch_mode = 5

[node name="Label" type="Label" parent="CanvasLayer/GridContainer"]
custom_minimum_size = Vector2(30, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("20_7ggis")
theme_override_font_sizes/font_size = 20
text = "Coin"
horizontal_alignment = 1
autowrap_mode = 2

[node name="Label 1" type="Label" parent="CanvasLayer/GridContainer"]
custom_minimum_size = Vector2(30, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("20_7ggis")
theme_override_font_sizes/font_size = 20
text = "Iron Key"
horizontal_alignment = 1
autowrap_mode = 2

[node name="Label 2" type="Label" parent="CanvasLayer/GridContainer"]
custom_minimum_size = Vector2(30, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("20_7ggis")
theme_override_font_sizes/font_size = 20
text = "Rusty Key"
horizontal_alignment = 1
autowrap_mode = 2

[node name="Button 1" type="Button" parent="CanvasLayer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_styles/normal = ExtResource("21_tsjoh")
theme_override_styles/hover = ExtResource("22_6kxwt")
theme_override_styles/pressed = ExtResource("23_ncpfo")
text = "Sold"

[node name="Button 2" type="Button" parent="CanvasLayer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_styles/normal = ExtResource("21_tsjoh")
theme_override_styles/hover = ExtResource("22_6kxwt")
theme_override_styles/pressed = ExtResource("23_ncpfo")
text = "Sold"

[node name="Button 3" type="Button" parent="CanvasLayer/GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_styles/normal = ExtResource("21_tsjoh")
theme_override_styles/hover = ExtResource("22_6kxwt")
theme_override_styles/pressed = ExtResource("23_ncpfo")
text = "Sold"

[node name="Bell_Button" type="TextureButton" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_1kh6i")
offset_left = 343.0
offset_top = 266.0
offset_right = 407.0
offset_bottom = 330.0
texture_normal = ExtResource("12_cq3om")
texture_pressed = ExtResource("13_brnwm")

[node name="Hover_Hint" type="Label" parent="CanvasLayer"]
visible = false
offset_left = 542.0
offset_top = 215.0
offset_right = 777.0
offset_bottom = 252.0
theme_override_fonts/font = ExtResource("20_7ggis")
theme_override_font_sizes/font_size = 20
text = "Hover items for details"

[node name="Bell_Hint" type="Label" parent="CanvasLayer"]
visible = false
offset_left = 342.0
offset_top = 312.0
offset_right = 407.0
offset_bottom = 349.0
theme_override_fonts/font = ExtResource("20_7ggis")
theme_override_font_sizes/font_size = 20
text = "Reroll"
horizontal_alignment = 1

[node name="Exit_Button_Canvas" type="CanvasLayer" parent="."]

[node name="TextureButton" type="TextureButton" parent="Exit_Button_Canvas"]
offset_left = 6.0
offset_top = 127.0
offset_right = 292.0
offset_bottom = 259.0
texture_normal = ExtResource("19_jhu5i")
texture_pressed = ExtResource("20_tc5ql")
texture_hover = ExtResource("26_svq6n")
stretch_mode = 5

[node name="Label" type="Label" parent="Exit_Button_Canvas"]
offset_left = 16.0
offset_top = 95.0
offset_right = 302.0
offset_bottom = 140.0
theme_override_fonts/font = ExtResource("20_7ggis")
theme_override_font_sizes/font_size = 32
text = "Continue"
horizontal_alignment = 1

[node name="SFX_Player" type="AudioStreamPlayer" parent="."]
bus = &"SFX"

[node name="TalkShop" type="Node" parent="."]
script = ExtResource("27_k17hy")
talkable_monsters = [ExtResource("34_uqav8"), ExtResource("35_7mb3j"), ExtResource("43_w5icr"), ExtResource("39_ru1y1"), ExtResource("38_o6vor"), ExtResource("45_u3ovb"), ExtResource("46_hrbqq"), ExtResource("41_mftnc"), ExtResource("40_iltgu"), ExtResource("43_ns2ou"), ExtResource("44_2e4ew"), ExtResource("45_r1rqu"), ExtResource("46_dy5ik"), ExtResource("47_mpoo3"), ExtResource("48_nkfhb"), ExtResource("49_qqo7h"), ExtResource("50_epysp"), ExtResource("51_jckm4"), ExtResource("52_ecqcm"), ExtResource("53_0y2jg"), ExtResource("54_ux066"), ExtResource("55_71xnl"), ExtResource("56_a8chn"), ExtResource("57_6cavy"), ExtResource("58_s26ah"), ExtResource("59_ev35b"), ExtResource("60_56034"), ExtResource("61_7ou4q"), ExtResource("62_c81xl"), ExtResource("63_jyji2"), ExtResource("64_ysuoo"), ExtResource("48_yblgj"), ExtResource("66_puo1b"), ExtResource("67_x1c77"), ExtResource("68_x867q"), ExtResource("69_563il"), ExtResource("49_u43m2"), ExtResource("41_fcdxu"), ExtResource("42_p4mbs"), ExtResource("43_v25h8"), ExtResource("53_af0mv"), ExtResource("75_ppkv7"), ExtResource("37_qolwr"), ExtResource("55_ocmmk"), ExtResource("44_bt4vy"), ExtResource("79_a5hii"), ExtResource("80_2t88m"), ExtResource("57_ovvnp"), ExtResource("58_njdw2"), ExtResource("83_0bb7y")]
positions = [NodePath("Postion 1"), NodePath("Position 2"), NodePath("Position 3"), NodePath("Position 4")]
group_size = 4
dialog_array = [ExtResource("43_w5icr"), ExtResource("39_ru1y1"), ExtResource("45_u3ovb"), ExtResource("46_hrbqq"), ExtResource("40_iltgu"), ExtResource("48_yblgj"), ExtResource("49_u43m2"), ExtResource("41_fcdxu"), ExtResource("42_p4mbs"), ExtResource("43_v25h8"), ExtResource("53_af0mv"), ExtResource("37_qolwr"), ExtResource("55_ocmmk"), ExtResource("44_bt4vy"), ExtResource("57_ovvnp"), ExtResource("58_njdw2")]

[node name="Postion 1" type="Marker2D" parent="TalkShop"]
position = Vector2(223, 602)

[node name="Position 2" type="Marker2D" parent="TalkShop"]
position = Vector2(427, 604)

[node name="Position 3" type="Marker2D" parent="TalkShop"]
position = Vector2(942, 429)

[node name="Position 4" type="Marker2D" parent="TalkShop"]
position = Vector2(78, 349)

[node name="next_char" type="Timer" parent="TalkShop"]
wait_time = 0.05

[node name="next_message" type="Timer" parent="TalkShop"]
wait_time = 2.0
one_shot = true
autostart = true

[node name="Dialogue Panel 1" type="PanelContainer" parent="TalkShop"]
visible = false
offset_left = 107.0
offset_top = 485.0
offset_right = 134.0
offset_bottom = 528.0
theme_override_styles/panel = ExtResource("38_n8mt3")

[node name="DialogueLabel1" type="Label" parent="TalkShop/Dialogue Panel 1"]
layout_mode = 2
theme_override_font_sizes/font_size = 12
horizontal_alignment = 1

[node name="Dialogue Panel 2" type="PanelContainer" parent="TalkShop"]
visible = false
offset_left = 353.0
offset_top = 495.0
offset_right = 380.0
offset_bottom = 538.0
theme_override_styles/panel = ExtResource("39_wirer")

[node name="DialogueLabel2" type="Label" parent="TalkShop/Dialogue Panel 2"]
layout_mode = 2
theme_override_font_sizes/font_size = 12
horizontal_alignment = 1

[connection signal="pressed" from="CanvasLayer/GridContainer/Button 1" to="." method="_on_button_1_pressed"]
[connection signal="pressed" from="CanvasLayer/GridContainer/Button 2" to="." method="_on_button_2_pressed"]
[connection signal="pressed" from="CanvasLayer/GridContainer/Button 3" to="." method="_on_button_3_pressed"]
[connection signal="pressed" from="CanvasLayer/Bell_Button" to="." method="_on_bell_button_pressed"]
[connection signal="pressed" from="Exit_Button_Canvas/TextureButton" to="." method="_on_texture_button_pressed"]
[connection signal="timeout" from="TalkShop/next_char" to="TalkShop" method="_on_next_char_timeout"]
[connection signal="timeout" from="TalkShop/next_message" to="TalkShop" method="_on_next_message_timeout"]
